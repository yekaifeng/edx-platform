#!/usr/bin/env bash
# Experimental! Not ready for production use.
# Adapted from https://github.com/edx/configuration/tree/master/playbooks/roles/demo
set -xeuo pipefail
cd /openedx/app/edxapp/edx-platform
. ../edxapp_env

DEMO_COURSE_KEY='course-v1:edX+DemoX+Demo_Course'

# Delete the demo course clone (if it exists) and then do a shallow re-clone of it.
mkdir -p /openedx/app/demo
(
	cd /openedx/app/demo && 
	rm -rf edx-demo-course &&
	git clone https://github.com/edx/edx-demo-course.git --depth 1
)

# Import the course.
./manage.py cms import /openedx/var/edxapp/data /openedx/app/demo/edx-demo-course

